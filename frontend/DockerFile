## Multi-stage Dockerfile for Vite (React + TS) frontend

# 1) Build stage
FROM node:20-alpine AS builder
WORKDIR /app

# Copy deps for better caching
COPY package*.json ./
RUN npm ci

# Copy source
COPY . .

# Build production bundle (use Vite directly to ensure dist is created)
RUN npx vite build


RUN npm install -g serve

COPY --from=builder /app/dist ./dist

EXPOSE 5173
CMD ["serve", "-s", "dist", "-l", "5173"]
